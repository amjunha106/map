<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 뷰포트 설정 -->
    <title>Donkatsu Guide</title>
    <!-- Google Fonts 추가 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@700&display=swap" rel="stylesheet">
    <!-- 송명 폰트 추가 -->
    <link href="https://fonts.googleapis.com/css2?family=Song+Myung&display=swap" rel="stylesheet">
    <!-- 나눔 손글씨 펜 폰트 추가 -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <!-- Font Awesome CDN 추가 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <style>
        html, body {
          height: 100%; /* 전체 페이지 높이를 100%로 설정 */
          margin: 0; /* 페이지의 기본 여백을 제거 */
          font-family: 'Noto Sans KR', sans-serif; /* 기본 폰트 설정 */
          overflow-x: hidden; /* 좌우 스크롤을 숨김 */
          background-color: #1a1a1a; /* 배경색을 사이드바와 동일하게 설정 */
        }

        /* 사이드바 스타일 */
        .sidebar {
          width: 14vw; /* 사이드바 너비를 화면 너비의 14%로 설정 */
          height: 100vh; /* 사이드바 높이를 화면 전체 높이로 설정 */
          position: fixed; /* 화면에 고정된 위치 */
          background: #1a1a1a; /* 사이드바 배경색을 어두운 색으로 설정 */
          color: #fff; /* 사이드바 내 글자 색상 설정 */
          box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3); /* 사이드바에 그림자 효과 추가 */
          display: flex; /* 사이드바 내용을 flex로 배치 */
          flex-direction: column; /* 메뉴 항목들을 세로로 배치 */
          justify-content: flex-start; /* 메뉴 항목들을 상단에 배치 */
          padding-top: 0; /* 사이드바 상단 여백 제거 */
          border-right: 2px solid black; /* 사이드바 오른쪽 테두리 추가 */
        }

        /* 사이드바 이미지 스타일 */
        .sidebar img {
          margin-top: 8vh; /* 상단 여백을 화면 높이 비율로 설정 */
          width: 100%; /* 이미지 너비를 사이드바 너비에 맞게 설정 */
          height: 17vh; /* 이미지 높이를 화면 높이의 17%로 설정 */
          object-fit: cover; /* 이미지가 영역을 가득 채우도록 설정 */
        }

        /* 메뉴 영역 스타일 */
        .menu {
          display: flex; /* 메뉴 항목들을 flex로 배치 */
          flex-direction: column; /* 메뉴 항목들을 세로로 배치 */
          justify-content: flex-start; /* 메뉴 항목들을 상단에 배치 */
          align-items: center; /* 메뉴 항목들을 가로로 중앙 정렬 */
          padding-top: 40px; /* 메뉴 항목들 상단 여백 조정 */
          flex-grow: 1; /* 남은 공간을 채우도록 설정 */
        }

        /* 메뉴 항목 스타일 */
        .menu-item {
          font-family: 'Noto Sans KR', sans-serif; /* 사이드바 메뉴 폰트 설정 */
          font-size: 3vw; /* 화면 너비에 비례하여 메뉴 글씨 크기 설정 */
          color: #b0b0b0; /* 밝은 회색 톤 */
          margin: 10px 0; /* 메뉴 항목들 간의 간격 설정 */
          text-decoration: none; /* 기본 텍스트 밑줄 제거 */
          transition: color 0.3s ease, transform 0.3s ease; /* 색상과 크기 변화를 부드럽게 설정 */
        }

        /* 메뉴 항목 hover 스타일 */
        .menu-item:hover {
          color: #f39c12; /* hover 시 텍스트 색상을 오렌지로 변경 */
          transform: scale(1.1); /* hover 시 항목 크기를 확대 */
        }

        /* 탑바 스타일 */
        .topbar {
          height: 15vh; /* 화면 높이의 15%로 탑바 높이 설정 */
          position: fixed; /* 화면에 고정된 탑바 */
          top: 0; /* 페이지 상단에 위치 */
          left: 0; /* 페이지 왼쪽에 위치 */
          width: calc(100% - 14vw); /* 사이드바를 제외한 나머지 화면 너비 */
          margin-left: 14.1vw; /* 사이드바 오른쪽에 위치 */
          background: #1a1a1a; /* 배경색을 어두운 색으로 설정 */
          color: white; /* 텍스트 색을 흰색으로 설정 */
          display: flex; /* flex로 아이템들을 배치 */
          justify-content: center; /* 아이템들을 가로로 중앙 정렬 */
          align-items: center; /* 아이템들을 세로로 중앙 정렬 */
          padding: 2vh 0; /* 상하 패딩 설정 */
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); /* 탑바에 그림자 효과 추가 */
          z-index: 1000; /* 다른 요소보다 위에 위치하도록 설정 */
        }

        .topbar a{
          text-decoration: none;
        }

        /* 타이틀 스타일 */
        .title {
          margin: 0; /* 타이틀의 마진 제거 */
          font-size: 70px; /* 타이틀 글씨 크기 설정 */
          font-family: 'Song Myung', serif; /* 송명 폰트 적용 */
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* 타이틀에 그림자 효과 추가 */
          display: flex; /* 타이틀을 flex로 배치 */
          align-items: center; /* 아이콘과 타이틀 텍스트를 세로로 중앙 정렬 */
          color: white; /* 타이틀 글씨 색상 흰색으로 설정 */
        }

        /* 아이콘 스타일 */
        .icon {
          font-size: 70px; /* 아이콘 크기 설정 */
          margin: 0 20px; /* 아이콘 간격 설정 */
          color: #f39c12; /* 아이콘 색상 오렌지로 설정 */
        }

        /* 타이틀 글씨 크기 설정 */
        .title {
          font-size: 5vw; /* 화면 너비에 비례하여 타이틀 크기 설정 */
        }

        /* 이미지 슬라이드 스타일 */
        .slider-container {
          position: absolute;
          top: 19.3vh; /* 탑바 바로 아래에 위치 */
          left: 14.1vw; /* 사이드바를 제외한 공간에 위치 */
          width: calc(100% - 14.1vw); /* 사이드바 오른쪽에 맞춰 너비 설정 */
          height: 80.5vh; /* 슬라이드 영역 높이 설정 */
          overflow: hidden; /* 슬라이드 영역을 넘지 않도록 설정 */
          border: 1px solid #333; /* 슬라이드 영역 테두리 추가 */
          border-radius: 15px;
        }

        /* 슬라이드 영역 스타일 */
        .slider {
          display: flex; /* 슬라이드들을 가로로 배치 */
          width: 1000%; /* 전체 너비 100% 설정 */
          height: 100%; /* 전체 높이 100% 설정 */
          transition: transform 1s ease-in-out; /* 슬라이드 전환 시 애니메이션 효과 추가 */
          transform: translateX(0);  /* 처음에 첫 번째 슬라이드만 보이도록 설정 */
        }

        /* 각 슬라이드 스타일 */
        .slide {
          width: 10%; /* 각 슬라이드가 전체 너비를 차지하도록 설정 */
          height: 100%; /* 슬라이드가 전체 높이를 차지하도록 설정 */
          position: relative; /* 절대 위치 지정 */
        }

        .slide img {
          width: 100%; /* 이미지의 너비를 슬라이드 너비에 맞게 설정 */
          height: 100%; /* 이미지의 높이를 슬라이드 높이에 맞게 설정 */
          object-fit: cover; /* 이미지가 영역을 가득 채우도록 설정 */
          object-position: center; /* 이미지의 중앙을 기준으로 크기를 조정 */
        }

        /* 슬라이드 텍스트 스타일 */
        .text-container {
          position: absolute; /* 텍스트를 슬라이드 이미지 위에 배치 */
          top: 50%; /* 세로 중앙 */
          left: 50%; /* 가로 중앙 */
          transform: translate(-50%, -50%); /* 정확히 중앙 정렬 */
          color: lightgray; /* 텍스트 색상 연한 회색으로 설정 */
          font-family: 'Nanum Pen Script', cursive; /* 나눔 손글씨 펜 폰트 적용 */
          font-size: 4vw; /* 화면 크기에 맞춰 텍스트 크기 조정 */
          text-align: center; /* 텍스트 중앙 정렬 */
          line-height: 1.5; /* 텍스트 간격 조정 */
          z-index: 1; /* 텍스트가 이미지 뒤로 가도록 설정 */
        }

        /* 콘텐츠 영역 스타일 */
        .content {
          display: none; /* 기본적으로 숨김 */
          position: absolute;
          top: 19.3vh; /* 탑바 바로 아래에 위치 */
          left: 14.1vw; /* 사이드바를 제외한 공간에 위치 */
          width: calc(100% - 14.1vw); /* 사이드바 오른쪽에 맞춰 너비 설정 */
          height: 80.5vh; /* 슬라이드 영역 높이 설정 */
          overflow: hidden; /* 슬라이드 영역을 넘지 않도록 설정 */
          border: 1px solid #333; /* 슬라이드 영역 테두리 추가 */
        }

        /* 랭킹 콘텐츠 스타일 */
    .ranking-content {
      border: 3px solid #f39c12; /* 테두리를 오렌지 색으로 설정 */
      border-radius: 15px; /* 둥근 테두리 */
      width: 80%; /* 콘텐츠 너비를 80%로 설정 */
      margin: 20px auto; /* 가로 중앙 정렬 */
      background-color: #333; /* 어두운 회색 배경 */
      padding: 20px; /* 내부 여백 */
      box-sizing: border-box; /* 패딩 포함한 크기 설정 */
      position: relative; /* 상대 위치 */
      display: flex; /* 내부 요소를 flex로 배치 */
      flex-direction: column; /* 세로로 배치 */
      align-items: center; /* 수평 중앙 정렬 */
      color: white; /* 글씨 색상 흰색 */
      transition: all 0.3s ease; /* hover 시 부드러운 전환 효과 */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); /* 그림자 추가 */
    }

    /* 랭킹 콘텐츠 항목 hover 스타일 */
    .ranking-content:hover {
      background-color: #444; /* hover 시 배경색 살짝 밝게 변경 */
      transform: scale(1.05); /* hover 시 크기 확대 */
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5); /* hover 시 그림자 효과 강조 */
      cursor: pointer; /* hover 시 커서 손 모양 */
    }

    /* 순위 제목 스타일 */
    .ranking-content p {
      font-size: 1.5em; /* 글씨 크기 설정 */
      margin: 10px 0; /* 항목 간 간격 설정 */
      font-family: 'Noto Sans KR', sans-serif; /* 한글 폰트 */
      text-align: center; /* 텍스트 중앙 정렬 */
      line-height: 1.5; /* 줄 간격 설정 */
    }

    /* 순위 번호에 대한 스타일 */
    .ranking-content p:first-child {
      font-size: 2em; /* 순위 번호는 좀 더 크게 설정 */
      color: #f39c12; /* 순위는 오렌지 색상 */
      font-weight: bold; /* 굵은 글씨 */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6); /* 순위에 그림자 효과 추가 */
    }

    /* 식당 이름 및 기타 정보 스타일 */
    .ranking-content p:not(:first-child) {
      font-size: 1.2em; /* 다른 항목들은 상대적으로 작은 글씨 크기 */
      color: #ccc; /* 연한 회색 텍스트 */
    }

    /* 평점 표시 스타일 */
    .ranking-content p span {
      font-weight: bold; /* 평점은 굵은 글씨 */
      color: #f39c12; /* 평점은 오렌지색 */
    }

        /* 지역 콘텐츠 항목 스타일 */
        .location-content {
          border: 3px solid #b0b0b0; /* 회색 테두리 설정 */
          border-radius: 15px; /* 테두리 둥글게 설정 */
          width: 23%; /* 3개 항목을 나열하기 위해 너비 설정 */
          height: 300px; /* 높이 설정 */
          background-color: #333; /* 배경색 어두운 색으로 설정 */
          padding: 20px; /* 내부 여백 추가 */
          box-sizing: border-box; /* 패딩을 포함한 크기 설정 */
          margin: 13% auto auto auto; /* 간격 설정 */
          position: relative; /* 상대 위치 설정 */
          text-align: center; /* 텍스트 중앙 정렬 */
          display: flex; /* 콘텐츠 내부를 flex로 배치 */
          justify-content: center; /* 수평 중앙 정렬 */
          align-items: center; /* 수직 중앙 정렬 */
          font-size: 3vw; /* 글씨 크기를 화면 너비에 비례하여 설정 */
          color: white; /* 텍스트 색상 흰색으로 설정 */
        }

        /* 지역 콘텐츠 항목 hover 시 스타일 */
        .location-content:hover {
          color: #f39c12; /* hover 시 글씨 색상을 오렌지로 변경 */
          transform: scale(1.05); /* hover 시 크기를 약간 확대 */
          border: 3px solid #f39c12; /* hover 시 테두리를 오렌지로 변경 */
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); /* hover 시 그림자 효과 추가 */
          cursor: pointer; /* hover 시 마우스 포인터를 손 모양으로 변경 */
        }

        /* 철학 콘텐츠 스타일 */
    .philosophy-content {
      font-family: 'Nanum Pen Script', cursive; /* 손글씨 스타일 폰트 적용 */
      font-size: 3vw; /* 화면 크기에 맞춰 글씨 크기 조정 */
      color: #f39c12; /* 텍스트 색상을 오렌지색으로 설정 */
      text-align: center; /* 텍스트 중앙 정렬 */
      line-height: 1.2; /* 줄 간격 조정 */
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3); /* 텍스트에 그림자 효과 추가 */
      padding: 20px; /* 내부 여백 추가 */
      background: linear-gradient(135deg, #1a1a1a, #333); /* 텍스트 그라데이션 효과 */
      border-radius: 10px; /* 테두리 둥글게 설정 */
      margin: 10px auto; /* 가운데 정렬 */
      width: 80%; /* 너비 조정 */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 부드러운 그림자 효과 */
    }

    /* 텍스트 강조 및 더 나은 가독성 */
    .philosophy-content br {
      margin-bottom: 20px; /* 줄 바꿈 후 간격 추가 */
    }

    .philosophy-content span {
      font-weight: bold; /* 강조 부분은 굵게 설정 */
      color: #e67e22; /* 강조 부분 색상 변경 */
      font-size: 1.2em; /* 강조 부분 글씨 크기 약간 키움 */
    }


        /* 미디어 쿼리: 화면 높이가 1440px 이상일 때 (27인치 해상도) */
        @media screen and (min-height: 1440px) {
          .sidebar {
            width: 20vw; /* 화면 크기에 맞는 사이드바 너비 조정 */
          }

          .title {
            font-size: 4vw; /* 타이틀 크기 조금 축소 */
          }

          .text-container {
            font-size: 3vw; /* 텍스트 크기 축소 */
          }

          .slider-container {
            height: 55vh; /* 슬라이드 영역 높이 축소 */
          }

          .content {
            font-size: 2.5vw; /* 콘텐츠 글씨 크기 조정 */
          }

           .ranking-content {
        width: 90%; /* 작은 화면에서는 너비를 더 넓게 */
        padding: 15px; /* 패딩을 줄여서 공간 절약 */
      }

      .ranking-content p {
        font-size: 1em; /* 글씨 크기를 조금 더 줄임 */
      }

          .location-content {
            width: 20%; /* 지역 콘텐츠 크기 축소 */
            font-size: 3.5vw; /* 글씨 크기 축소 */
          }
        }
    </style>

</head>
<body>
<div class="sidebar">
    <!-- 사이드바 이미지 클릭 시 URL로 이동 -->
    <a href="http://localhost:8080/KatsuGuide">
        <img th:src="@{/images/image1.png}"/>
    </a>

    <!-- 사이드바 메뉴 추가 -->
    <div class="menu">
        <!-- 사이드바 메뉴에서 랭킹 클릭 시 showContent('ranking') 호출 -->
        <a href="javascript:void(0);" class="menu-item" onclick="showContent('ranking')">랭킹</a>
        <a href="#" class="menu-item" onclick="showContent('location')">지역</a>
        <a href="#" class="menu-item" onclick="showContent('philosophy')">철학</a>
        <a href="#" class="menu-item" onclick="showContent('recommend')">추천</a>
    </div>
</div>

<div class="topbar">
    <!-- 타이틀 클릭 시 색상 변화 방지 및 이동 -->
    <a href="http://localhost:8080/KatsuGuide">
        <div class="title">
            <i class="fas fa-utensils icon"></i>
            돈 슐 랭 가 이 드
            <i class="fas fa-utensils icon"></i>
        </div>
    </a>
</div>

<!-- 이미지 슬라이드 -->
<div class="slider-container" id="slider-container">
    <div class="slider" id="slider">
        <!-- 각 슬라이드에 하나의 이미지만 들어갑니다 -->
        <div class="slide">
            <img th:src="@{/images/image2.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image3.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image4.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image5.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image6.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image7.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image8.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image9.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image10.jpg}"/>
        </div>
        <div class="slide">
            <img th:src="@{/images/image11.jpg}"/>
        </div>
    </div>
    <!-- 텍스트는 이미지 슬라이드 뒤로 넘어가게끔 설정 -->
    <div class="text-container">
        "세상에 완벽한 돈까스는 없다<br/>
        완벽에 가까운 돈까스만 있을 뿐"
    </div>
</div>


<!-- 콘텐츠 영역 -->
<!-- 콘텐츠 영역 (랭킹 데이터 출력) -->
<div class="content ranking" style="display: none; overflow-y: auto; max-height: 80vh;">
    <div id="ranking-container" style="width: 100%; height: 80.5vh;">
        <!-- 랭킹 데이터를 여기에 동적으로 삽입 -->
    </div>
</div>

<div class="content location">
    <div class="location-content" onclick="showContent('ranking', '강북')">
        강북
    </div>

    <div class="location-content" onclick="showContent('ranking', '강남')">
        강남
    </div>

    <div class="location-content" onclick="showContent('ranking', '수도권')">
        수도권
    </div>
</div>

<div class="content philosophy">
    <div class="philosophy-content">
        <span>첫번째:</span><br/>돈까스는 스며드는것.<br/><br/>
        <span>두번째:</span><br/>특등심(상로스)가 없는 가게는 항상 의심할 것.<br/><br/>
        <span>세번째:</span><br/>등심/안심 가격이 12,000원 아래는 끊임없이 의심할 것.
    </div>
</div>

<div class="content recommend">
    <div class="recommend-content">
        추천 콘텐츠가 여기에 표시됩니다.
    </div>
</div>

<script>
  let currentSlide = 0;  // 현재 슬라이드 인덱스
    const slides = document.querySelectorAll('.slide');  // 모든 슬라이드
    const totalSlides = slides.length;  // 총 슬라이드 개수

    // 슬라이드 전환 함수
    function moveToSlide(slideIndex) {
        // 슬라이드가 범위를 넘지 않도록 처리
        if (slideIndex < 0) {
            currentSlide = totalSlides - 1;
        } else if (slideIndex >= totalSlides) {
            currentSlide = 0;
        } else {
            currentSlide = slideIndex;
        }

        // 슬라이드 위치 이동
        const slider = document.getElementById('slider');
        slider.style.transform = `translateX(-${currentSlide * 10}%)`; // 슬라이드 이동
    }

    // 자동 슬라이드 전환 (5초마다 슬라이드 이동)
    setInterval(() => {
        moveToSlide(currentSlide + 1);
    }, 5000);

    // 콘텐츠를 변경하는 함수 (메뉴 클릭 시 실행)
    function showContent(contentName, location = null) {
      // 이미지 슬라이드와 텍스트를 숨김 처리
      document.getElementById('slider-container').style.display = 'none';

      // 모든 콘텐츠를 숨김 처리
      const allContents = document.querySelectorAll('.content');
      allContents.forEach(content => {
        content.style.display = 'none';  // 모든 콘텐츠를 숨김 처리
      });

      // 클릭한 콘텐츠만 활성화하여 보여주기
      const activeContent = document.querySelector(`.${contentName}`); // 클릭된 콘텐츠 선택
      activeContent.style.display = 'flex';  // 해당 콘텐츠에 display: flex를 설정하여 표시

      // 지역이 지정되었으면, 해당 지역의 랭킹 데이터를 가져옴
      if (contentName === 'ranking') {
        if (location) {
          fetchRankingsByLocation(location);  // 특정 지역에 대한 랭킹 데이터를 가져오는 함수 호출
        } else {
          fetchRankings();  // 지역이 없으면 모든 가게의 랭킹을 가져옴
        }
      }
    }

    // 특정 지역에 해당하는 가게들의 랭킹 데이터를 가져오는 함수
    function fetchRankingsByLocation(location) {
      fetch(`/rank?location=${location}`)  // 서버의 "/rank?location=" URL로 GET 요청
        .then(response => response.json())  // JSON 형식으로 응답 받기
        .then(data => {
          const rankingContainer = document.getElementById('ranking-container');
          rankingContainer.innerHTML = '';  // 기존 데이터를 지운 후 새로 갱신

          // 데이터가 있으면 각 랭킹 정보를 표시
          if (data && data.length > 0) {
            data.forEach(item => {
              const rankingElement = document.createElement('div');

              // ranking-content 클래스를 추가하여 스타일 적용
              rankingElement.classList.add('ranking-content');

              rankingElement.innerHTML = `
                <p>순위: ${item.ranking}</p>
                <p>식당 이름: ${item.restaurantName}</p>
                <p>위치: ${item.location}</p>
                <p>평점: ${item.rating}</p>
                <p>리뷰: ${item.review}</p>
              `;

              rankingContainer.appendChild(rankingElement); // ranking-container에 추가
            });
          } else {
            rankingContainer.innerHTML = '<p>해당 지역의 랭킹 데이터가 없습니다.</p>';
          }
        })
        .catch(error => {
          console.error('랭킹 데이터를 불러오는 데 오류가 발생했습니다:', error);
        });
    }

    // 모든 가게의 랭킹 데이터를 가져오는 기본 함수
    function fetchRankings() {
      fetch('/rank')  // 서버의 "/rank" URL로 GET 요청
        .then(response => response.json())  // JSON 형식으로 응답 받기
        .then(data => {
          const rankingContainer = document.getElementById('ranking-container');
          rankingContainer.innerHTML = '';  // 기존 데이터를 지운 후 새로 갱신

          // 데이터가 있으면 각 랭킹 정보를 표시
          if (data && data.length > 0) {
            data.forEach(item => {
              const rankingElement = document.createElement('div');

              // ranking-content 클래스를 추가하여 스타일 적용
              rankingElement.classList.add('ranking-content');

              rankingElement.innerHTML = `
                <p>순위: ${item.ranking}</p>
                <p>식당 이름: ${item.restaurantName}</p>
                <p>위치: ${item.location}</p>
                <p>평점: ${item.rating}</p>
                <p>리뷰: ${item.review}</p>
              `;

              rankingContainer.appendChild(rankingElement); // ranking-container에 추가
            });
          } else {
            rankingContainer.innerHTML = '<p>랭킹 데이터가 없습니다.</p>';
          }
        })
        .catch(error => {
          console.error('랭킹 데이터를 불러오는 데 오류가 발생했습니다:', error);
        });
    }

</script>

</body>
</html>